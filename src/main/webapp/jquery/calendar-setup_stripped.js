Calendar.setup=function(a){function b(b,h){"undefined"==typeof a[b]&&(a[b]=h)}function g(a){var b=a.params,c=a.dateClicked||b.electric;if(c&&b.inputField&&(b.inputField.value=a.date.print(b.ifFormat),"function"==typeof b.inputField.onchange))b.inputField.onchange();c&&b.displayArea&&(b.displayArea.innerHTML=a.date.print(b.daFormat));if(c&&"function"==typeof b.onUpdate)b.onUpdate(a);c&&b.flat&&"function"==typeof b.flatCallback&&b.flatCallback(a);c&&(b.singleClick&&a.dateClicked)&&a.callCloseHandler()}
b("inputField",null);b("displayArea",null);b("button",null);b("eventName","click");b("ifFormat","%Y/%m/%d");b("daFormat","%Y/%m/%d");b("singleClick",!0);b("disableFunc",null);b("dateStatusFunc",a.disableFunc);b("dateText",null);b("firstDay",null);b("align","Br");b("range",[1900,2999]);b("weekNumbers",!0);b("flat",null);b("flatCallback",null);b("onSelect",null);b("onClose",null);b("onUpdate",null);b("date",null);b("showsTime",!1);b("timeFormat","24");b("electric",!0);b("step",2);b("position",null);
b("cache",!1);b("showOthers",!1);b("multiple",null);var e=["inputField","displayArea","button"],f;for(f in e)"string"==typeof a[e[f]]&&(a[e[f]]=document.getElementById(a[e[f]]));if(!(a.flat||a.multiple||a.inputField||a.displayArea||a.button))return alert("Calendar.setup:\n  Nothing to setup (no fields found).  Please check your code"),!1;if(null!=a.flat){"string"==typeof a.flat&&(a.flat=document.getElementById(a.flat));if(!a.flat)return alert("Calendar.setup:\n  Flat specified but can't find parent."),
!1;var c=new Calendar(a.firstDay,a.date,a.onSelect||g);c.showsOtherMonths=a.showOthers;c.showsTime=a.showsTime;c.time24="24"==a.timeFormat;c.params=a;c.weekNumbers=a.weekNumbers;c.setRange(a.range[0],a.range[1]);c.setDateStatusHandler(a.dateStatusFunc);c.getDateText=a.dateText;a.ifFormat&&c.setDateFormat(a.ifFormat);a.inputField&&"string"==typeof a.inputField.value&&c.parseDate(a.inputField.value);c.create(a.flat);c.show();return!1}(a.button||a.displayArea||a.inputField)["on"+a.eventName]=function(){var b=
a.inputField||a.displayArea,c=a.inputField?a.ifFormat:a.daFormat,e=!1,d=window.calendar;b&&(a.date=Date.parseDate(b.value||b.innerHTML,c));d&&a.cache?(a.date&&d.setDate(a.date),d.hide()):(window.calendar=d=new Calendar(a.firstDay,a.date,a.onSelect||g,a.onClose||function(a){a.hide()}),d.showsTime=a.showsTime,d.time24="24"==a.timeFormat,d.weekNumbers=a.weekNumbers,e=!0);if(a.multiple)for(d.multiple={},b=a.multiple.length;0<=--b;){var f=a.multiple[b],k=f.print("%Y%m%d");d.multiple[k]=f}d.showsOtherMonths=
a.showOthers;d.yearStep=a.step;d.setRange(a.range[0],a.range[1]);d.params=a;d.setDateStatusHandler(a.dateStatusFunc);d.getDateText=a.dateText;d.setDateFormat(c);e&&d.create();d.refresh();a.position?d.showAt(a.position[0],a.position[1]):d.showAtElement(a.button||a.displayArea||a.inputField,a.align);return!1};return c};
